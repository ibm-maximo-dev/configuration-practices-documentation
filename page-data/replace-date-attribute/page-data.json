{"componentChunkName":"component---src-pages-replace-date-attribute-mdx","path":"/replace-date-attribute/","result":{"pageContext":{"frontmatter":{"title":"Replace work order’s Schedule Finish Date with Target Complete Date attribute"},"relativePagePath":"/replace-date-attribute.mdx","titleType":"append","MdxNode":{"id":"e1f96336-1c1f-50af-82af-d04bab7277cd","children":[],"parent":"3331643e-4794-56e6-97fb-b859c5e2f7ca","internal":{"content":"---\ntitle: Replace work order’s Schedule Finish Date with Target Complete Date attribute\n---\n\n## About this task\n\nOut of the box Maximo® Mobile Technician application uses and display scheduled finish(SCHEDFINISH). This exercise guides on how to substitute the attribute SCHEDFINISH for TARGCOMPDATE on Work Order List page. It also shows how to overwrite the method used on controllers that use SCHEDFINISH.\n\n## Procedure \n\n### Step 1: Include a new attribute “targcompdate” into the existing datasource “dswolist”, in the app.xml.\n\n```xml\n    <maximo-datasource id=\"dswolist\" object-structure=\"mxapiwodetail\" saved-query=\"uxtechnicianownerfilter\" order-by=\"wopriority\" pre-load=\"false\" controller=\"ScheduleDataController\" selection-mode=\"single\" geometry-format=\"geojson\" default=\"false\">\n      <schema id=\"gjw7p\">\n\t      [...]\n        <attribute name=\"locationnum\" sortable=\"false\" id=\"n_pxp\"/>\n        <attribute name=\"targcompdate\" sortable=\"false\" id=\"trg_n83qg\"/>\n      </schema>\n      [...]\n    </maximo-datasource>\n```\n\n### Step 2: Replace the references in value and expression to hide the existing field in wo-card-group and to present the new attribute, in wo-card-group.xml file.\n\n```xml\n    <date-relative slot=\"slot4\" value=\"{item.targcompdate}\" type=\"date_full_month\" text-prefix=\"Due\" hidden=\"{item.actfinish || (item.computedIsOverDue || !item.targcompdate)}\" id=\"qj_43\"/>\n    <icon fill=\"red\" slot=\"slot3\" icon=\"carbon:warning--alt--filled\" hidden=\"{item.actfinish || (!item.computedIsOverDue || !item.targcompdate)}\" id=\"b38em\"/>\n    <date-relative slot=\"slot4\" value=\"{item.targcompdate}\" type=\"date_full_month\" text-prefix=\"Overdue since\" theme=\"error\" hidden=\"{item.actfinish || (!item.computedIsOverDue || !item.targcompdate)}\" id=\"qj_467\"/>\n```\n\n### Step 3: On AppCustomization.js file, create a computedIsOverDue method. This method already exists in the ScheduleDataController controller, so the new definition in AppCustomization overrides the existing one.\n\n```js\n  computedIsOverDue(item) {\n    if (!item.targcompdate) \n      return false;\n    let due = new Date(item.targcompdate);\n    if (isNaN(due)) \n      return false;\n    due.setHours(0, 0, 0, 0);\n    let today = new Date().setHours(0, 0, 0, 0);\n    // DO NOT USE manual calculations ; they fail in DST\n    // Use the library tools\n    let result = this.app.dataFormatter.getDateDiff(\n      due.toISOString(),\n      new Date(today).toISOString()\n    );\n    if (result >= 1) \n      return true;\n    else return false;\n  }\n```","type":"Mdx","contentDigest":"61bc9d0f63f3f16e53cc176605510d00","owner":"gatsby-plugin-mdx","counter":76},"frontmatter":{"title":"Replace work order’s Schedule Finish Date with Target Complete Date attribute"},"exports":{},"rawBody":"---\ntitle: Replace work order’s Schedule Finish Date with Target Complete Date attribute\n---\n\n## About this task\n\nOut of the box Maximo® Mobile Technician application uses and display scheduled finish(SCHEDFINISH). This exercise guides on how to substitute the attribute SCHEDFINISH for TARGCOMPDATE on Work Order List page. It also shows how to overwrite the method used on controllers that use SCHEDFINISH.\n\n## Procedure \n\n### Step 1: Include a new attribute “targcompdate” into the existing datasource “dswolist”, in the app.xml.\n\n```xml\n    <maximo-datasource id=\"dswolist\" object-structure=\"mxapiwodetail\" saved-query=\"uxtechnicianownerfilter\" order-by=\"wopriority\" pre-load=\"false\" controller=\"ScheduleDataController\" selection-mode=\"single\" geometry-format=\"geojson\" default=\"false\">\n      <schema id=\"gjw7p\">\n\t      [...]\n        <attribute name=\"locationnum\" sortable=\"false\" id=\"n_pxp\"/>\n        <attribute name=\"targcompdate\" sortable=\"false\" id=\"trg_n83qg\"/>\n      </schema>\n      [...]\n    </maximo-datasource>\n```\n\n### Step 2: Replace the references in value and expression to hide the existing field in wo-card-group and to present the new attribute, in wo-card-group.xml file.\n\n```xml\n    <date-relative slot=\"slot4\" value=\"{item.targcompdate}\" type=\"date_full_month\" text-prefix=\"Due\" hidden=\"{item.actfinish || (item.computedIsOverDue || !item.targcompdate)}\" id=\"qj_43\"/>\n    <icon fill=\"red\" slot=\"slot3\" icon=\"carbon:warning--alt--filled\" hidden=\"{item.actfinish || (!item.computedIsOverDue || !item.targcompdate)}\" id=\"b38em\"/>\n    <date-relative slot=\"slot4\" value=\"{item.targcompdate}\" type=\"date_full_month\" text-prefix=\"Overdue since\" theme=\"error\" hidden=\"{item.actfinish || (!item.computedIsOverDue || !item.targcompdate)}\" id=\"qj_467\"/>\n```\n\n### Step 3: On AppCustomization.js file, create a computedIsOverDue method. This method already exists in the ScheduleDataController controller, so the new definition in AppCustomization overrides the existing one.\n\n```js\n  computedIsOverDue(item) {\n    if (!item.targcompdate) \n      return false;\n    let due = new Date(item.targcompdate);\n    if (isNaN(due)) \n      return false;\n    due.setHours(0, 0, 0, 0);\n    let today = new Date().setHours(0, 0, 0, 0);\n    // DO NOT USE manual calculations ; they fail in DST\n    // Use the library tools\n    let result = this.app.dataFormatter.getDateDiff(\n      due.toISOString(),\n      new Date(today).toISOString()\n    );\n    if (result >= 1) \n      return true;\n    else return false;\n  }\n```","fileAbsolutePath":"/home/travis/build/maximo-app-framework/configuration-practices-documentation/src/pages/replace-date-attribute.mdx"}}},"staticQueryHashes":["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}