{"componentChunkName":"component---src-pages-restrict-wo-priority-based-on-work-type-mdx","path":"/restrict-wo-priority-based-on-work-type/","result":{"pageContext":{"frontmatter":{"title":"Restrict Work Order Priority Based On Work Type"},"relativePagePath":"/restrict-wo-priority-based-on-work-type.mdx","titleType":"append","MdxNode":{"id":"72d5fe76-cf98-5a64-9a0a-bed75f0b126c","children":[],"parent":"e12ec952-7932-5e95-9aa8-a14fbbd2a862","internal":{"content":"---\ntitle: Restrict Work Order Priority Based On Work Type\n---\n\n## About this task\n\nThis guide instructs on how to add new priority domain to the system and use it to prioritize work orders. It also describes how to\nimplement a condition to remove the Priority 5 option from the lookup when creating and editing work orders if their work types\nare other than preventive maintenance (PM)\n\n## Procedure\n\n### Step 1: Follow the practice below to create a query, create a datasource to load the data and declare a new lookup.\n\n[Create Priority Lookup in Techmobile](/create-wo-priority-lookup)\n\n### Step 2: Declare the dialogOpened method to handle the window opening event. The code inside the method should contain the verification of the name of the dialog that was opened, the existence of the datasource and the confirmation of the current page before executing the filter. Insert the following logic in the method:\n\n```js\n    dialogOpened({dialog}) {\n        // page name when dialog is open\n        this.app.log.d(TAG,`dialog ${dialog?.name} opened at ${this.app.currentPage.name} page`);\n\n        if (dialog?.name === 'trg_woPriorityLookup' && ['woedit'].some(page => page === this.app.currentPage.name)) {\n\n            // Check status domain datasource existence\n            const priorityLookupDS = this.app.findDatasource('trg_WoPrioritylookupDS');\n            if (!priorityLookupDS) {\n                this.app.log.e(TAG,'priorityLookupDS unknown to perform filter');\n                return;\n            }\n\n            // Check ds initialization\n            const currentWO = this.app.findDatasource(\"woDetailResource\");\n            if (!currentWO || !currentWO.initialized) {\n                this.app.log.e(TAG,'woDetailResource not initialized');\n                return;\n            }\n\n            const workItem = currentWO?.item;\n\n            // show Priority 5 option in the list when work order type is PM, otherwise we hide it.\n            if (!['PM'].includes(workItem.worktype)) {\n                // Remove priority 5 temporarily from priority domain \n                priorityLookupDS.applyInMemoryFilter((item) => item.value !== 5);\n                priorityLookupDS.load();\n            } else {\n                // Reset temporarily filter from status domain\n                priorityLookupDS.clearInMemoryFilter();\n            }\n        }\n    }\n```","type":"Mdx","contentDigest":"8333d1192623cdcbb1d09337abd3e0bb","owner":"gatsby-plugin-mdx","counter":78},"frontmatter":{"title":"Restrict Work Order Priority Based On Work Type"},"exports":{},"rawBody":"---\ntitle: Restrict Work Order Priority Based On Work Type\n---\n\n## About this task\n\nThis guide instructs on how to add new priority domain to the system and use it to prioritize work orders. It also describes how to\nimplement a condition to remove the Priority 5 option from the lookup when creating and editing work orders if their work types\nare other than preventive maintenance (PM)\n\n## Procedure\n\n### Step 1: Follow the practice below to create a query, create a datasource to load the data and declare a new lookup.\n\n[Create Priority Lookup in Techmobile](/create-wo-priority-lookup)\n\n### Step 2: Declare the dialogOpened method to handle the window opening event. The code inside the method should contain the verification of the name of the dialog that was opened, the existence of the datasource and the confirmation of the current page before executing the filter. Insert the following logic in the method:\n\n```js\n    dialogOpened({dialog}) {\n        // page name when dialog is open\n        this.app.log.d(TAG,`dialog ${dialog?.name} opened at ${this.app.currentPage.name} page`);\n\n        if (dialog?.name === 'trg_woPriorityLookup' && ['woedit'].some(page => page === this.app.currentPage.name)) {\n\n            // Check status domain datasource existence\n            const priorityLookupDS = this.app.findDatasource('trg_WoPrioritylookupDS');\n            if (!priorityLookupDS) {\n                this.app.log.e(TAG,'priorityLookupDS unknown to perform filter');\n                return;\n            }\n\n            // Check ds initialization\n            const currentWO = this.app.findDatasource(\"woDetailResource\");\n            if (!currentWO || !currentWO.initialized) {\n                this.app.log.e(TAG,'woDetailResource not initialized');\n                return;\n            }\n\n            const workItem = currentWO?.item;\n\n            // show Priority 5 option in the list when work order type is PM, otherwise we hide it.\n            if (!['PM'].includes(workItem.worktype)) {\n                // Remove priority 5 temporarily from priority domain \n                priorityLookupDS.applyInMemoryFilter((item) => item.value !== 5);\n                priorityLookupDS.load();\n            } else {\n                // Reset temporarily filter from status domain\n                priorityLookupDS.clearInMemoryFilter();\n            }\n        }\n    }\n```","fileAbsolutePath":"/home/travis/build/maximo-app-framework/configuration-practices-documentation/src/pages/restrict-wo-priority-based-on-work-type.mdx"}}},"staticQueryHashes":["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}