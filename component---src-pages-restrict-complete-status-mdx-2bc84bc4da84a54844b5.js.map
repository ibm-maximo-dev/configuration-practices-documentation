{"version":3,"file":"component---src-pages-restrict-complete-status-mdx-2bc84bc4da84a54844b5.js","mappings":"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","sources":["webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.module.scss","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.module.scss","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.module.scss","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/index.js","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/LastModifiedDate.js","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/last-modified-date.module.scss","webpack://mas-playbook/./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack://mas-playbook/./src/pages/restrict-complete-status.mdx"],"sourcesContent":["import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport * as styles from './PageHeader.module.scss';\n\nconst PageHeader = ({ title, theme, tabs = [] }) => (\n  <div\n    className={cx(styles.pageHeader, {\n      [styles.withTabs]: tabs.length,\n      [styles.darkMode]: theme === 'dark',\n    })}>\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={styles.text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.node,\n};\n\nexport default PageHeader;\n","// extracted by mini-css-extract-plugin\nexport var bxTextTruncateEnd = \"PageHeader-module--bx--text-truncate--end--b8JtW\";\nexport var bxTextTruncateFront = \"PageHeader-module--bx--text-truncate--front--WwZFh\";\nexport var darkMode = \"PageHeader-module--dark-mode--WCeH8\";\nexport var pageHeader = \"PageHeader-module--page-header--NqfPe\";\nexport var text = \"PageHeader-module--text--Er2EO\";\nexport var withTabs = \"PageHeader-module--with-tabs--vbQ-W\";","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n            branch\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory, branch } = repositoryProp || repository;\n\n  const href = `${baseUrl}/edit/${branch}${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n    branch: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","// extracted by mini-css-extract-plugin\nexport var bxTextTruncateEnd = \"EditLink-module--bx--text-truncate--end--uI0cF\";\nexport var bxTextTruncateFront = \"EditLink-module--bx--text-truncate--front--HxjcS\";\nexport var link = \"EditLink-module--link--IDrl1\";\nexport var row = \"EditLink-module--row--BEmSX\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  render() {\n    const { title, tabs, slug } = this.props;\n    const currentTab = slug.split('/').filter(Boolean).slice(-1)[0];\n\n    const pageTabs = tabs.map((tab) => {\n      const slugifiedTab = slugify(tab, { lower: true, strict: true });\n      const selected = slugifiedTab === currentTab;\n      // matches with or without trailing slash: /?\n      // matches with or without hash link: (#.*)?\n      const currentTabRegex = new RegExp(`${currentTab}/?(#.*)?$`);\n      const href = slug.replace(currentTabRegex, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav aria-label={title}>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPageTabs.propTypes = {\n  tabs: PropTypes.array,\n  slug: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport var bxTextTruncateEnd = \"PageTabs-module--bx--text-truncate--end--OC59x\";\nexport var bxTextTruncateFront = \"PageTabs-module--bx--text-truncate--front--5I6-L\";\nexport var link = \"PageTabs-module--link--Kz-7R\";\nexport var list = \"PageTabs-module--list--xLqxG\";\nexport var listItem = \"PageTabs-module--list-item--024o6\";\nexport var selectedItem = \"PageTabs-module--selected-item--aBB0K\";\nexport var tabsContainer = \"PageTabs-module--tabs-container--Cdfzw\";","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import LastModifiedDate from './LastModifiedDate';\n\nexport default LastModifiedDate;\n","import React from 'react';\nimport { Row, Column } from '../Grid';\nimport * as styles from './last-modified-date.module.scss';\n\nconst LastModifiedDate = ({ date }) => {\n  const options = {\n    day: '2-digit',\n    year: 'numeric',\n    month: 'long',\n  };\n\n  const lastModified = new Date(date);\n\n  return date ? (\n    <Row className={styles.row}>\n      <Column>\n        <div className={styles.text}>\n          Page last updated: {lastModified.toLocaleDateString('en-GB', options)}\n          {/* // https://www-03preprod.ibm.com/support/knowledgecenter/ibm_style/dates-and-times.html */}\n        </div>\n      </Column>\n    </Row>\n  ) : null;\n};\nexport default LastModifiedDate;\n","// extracted by mini-css-extract-plugin\nexport var bxTextTruncateEnd = \"last-modified-date-module--bx--text-truncate--end--QgCc7\";\nexport var bxTextTruncateFront = \"last-modified-date-module--bx--text-truncate--front--kel8a\";\nexport var row = \"last-modified-date-module--row--XJoYQ\";\nexport var text = \"last-modified-date-module--text--ogPQF\";","import React from 'react';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport Utils from '../components/Utils';\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\nimport useMetadata from '../util/hooks/useMetadata';\nimport LastModifiedDate from '../components/LastModifiedDate';\n\nconst Default = ({ pageContext, children, location, Title }) => {\n  const { frontmatter = {}, relativePagePath, titleType } = pageContext;\n  const {\n    tabs,\n    title,\n    theme: frontmatterTheme,\n    description,\n    keywords,\n    date,\n  } = frontmatter;\n\n  const { interiorTheme } = useMetadata();\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return (\n      slug.split('/').filter(Boolean).slice(-1)[0] ||\n      slugify(tabs[0], { lower: true })\n    );\n  };\n\n  const currentTab = getCurrentTab();\n\n  const theme = frontmatterTheme || interiorTheme;\n\n  return (\n    <Layout\n      tabs={tabs}\n      homepage={false}\n      theme={theme}\n      pageTitle={title}\n      pageDescription={description}\n      pageKeywords={keywords}\n      titleType={titleType}>\n      <PageHeader\n        title={Title ? <Title /> : title}\n        label=\"label\"\n        tabs={tabs}\n        theme={theme}\n      />\n      {tabs && (\n        <PageTabs\n          title={title}\n          slug={slug}\n          tabs={tabs}\n          currentTab={currentTab}\n        />\n      )}\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n        <LastModifiedDate date={date} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <Utils />\n    </Layout>\n  );\n};\n\nexport default Default;\n","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/maximo-app-framework/configuration-practices-documentation/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`About this task`}</h2>\n    <p>{`This guide instructs you to disable the COMPLETE option until the following conditions are met:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`The work order must contain at least one work log entry;`}</li>\n      <li parentName=\"ol\">{`Must contain an actual labor entry (for current labor);`}</li>\n      <li parentName=\"ol\">{`If work type is different from PM, check for presence of asset and the existence of complete PCR (Problem, Cause,\nRemedy) entry;`}</li>\n      <li parentName=\"ol\">{`If work type is PM, no need to have an asset or PCR entry.\nIn this customization, the COMPLETE option is removed from the status change lookups. The Work Order completion must be\ncompleted through the report page, if the conditions are met.`}</li>\n    </ol>\n    <h2>{`Procedure`}</h2>\n    <h3>{`Step 1: Add a boolean page state to the report_work page`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<states id=\"jy5r4\">\n[...]\n<state name=\"disableCompleted\" value=\"false\" type=\"boolean\" id=\"trg_g8n3b\"/>\n</states>\n`}</code></pre>\n    <h3>{`Step 2: In the app.xml file, include the hidecompleted state to the disable condition on the button (p6aav)`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<button slot=\"buttons\" label=\"Complete work\" kind=\"primary\" id=\"p6aav\" […]\ndisabled=\"{page.state.disableCompleted || woDetailsReportWork.item.flowcontrolled || !app.checkSigOption(\\`$\n{app.state.woOSName}.COMPWOBUTTON\\`)}\"/>\n`}</code></pre>\n    <h3>{`Step 3: In the AppCustomization.js file, declare the dialogOpened method to handle the window opening event. The code inside`}</h3>\n    <p>{`the method should contain the verification of the name of the dialog that was opened, the existence of the datasource and the\nconfirmation of the current page before executing the filter, “item.maxvalue !== ‘COMP’”, insert the following logic in the method:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`  /**\n   * dialogOpened handler filter out complete status when opened\n   * @param {Object} obj\n   * @param {Dialog} obj.dialog\n   */\n  dialogOpened({dialog}) {\n\n    // page name when dialog is open\n    this.app.log.d(TAG,\\`dialog \\${dialog?.name} opened at \\${this.app.currentPage.name} page\\`);\n\n    if (dialog?.name === 'woStatusChangeDialog') {\n\n      // Check status domain datasource existence\n      const statusDS = this.app.findDatasource('dsstatusDomainList');\n      if (!statusDS) {\n        this.app.log.e(TAG,'statusDS unknown to perform filter');\n        return;\n      }\n\n      // check if dialog opened is one of the allowed pages and name matches status dialog\n      if (['workOrderDetails', 'schedule'].some(page => page === this.app.currentPage.name)) {\n        // Remove COMP status temporarily from status domain \n        statusDS.applyInMemoryFilter((item) => item.maxvalue !== 'COMP');\n        statusDS.load();\n      } else {\n        // Reset temporarily filter from status domain\n        statusDS.clearInMemoryFilter();\n      }\n    }\n  }\n`}</code></pre>\n    <h3>{`Step 4: Create a method to check if a given list contains full failure report (Problem, Cause and Remedy)`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`/**\n   * Validates Problem, Cause and Remedy inside failure report list\n   * @private\n   * @param {Array} failureReport - failure report list.\n   * @returns {boolean} Promise of an array of items.\n   */\n  hasPCR(failureReport = []) {\n    let hasProblem = false;\n    let hasCause = false;\n    let hasRemedy = false;\n    for (const failure of failureReport) {\n      if (!hasProblem && failure.type_maxvalue === 'PROBLEM'){\n        hasProblem = true;\n      }\n      if (!hasCause && failure.type_maxvalue === 'CAUSE'){\n        hasCause = true;\n      }\n      if (!hasRemedy && failure.type_maxvalue === 'REMEDY'){\n        hasRemedy = true;\n      }\n    }\n    return hasProblem && hasCause && hasRemedy;\n  }\n`}</code></pre>\n    <h3>{`Step 5: Create the main method responsible to output if the a work order item can be completed based on the criteria discussed.`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{` /**\n   * Validation to allow completion. Validation is:\n   * a. should have work Log comments\n   * b. should have labor actuals\n   * c. should have Problem Cause and Remedy codes IF Work Type is not in [PM] and there is an Asset on the record\n   * This should only be called from report_work page\n   * @param {Application} app \n   * @returns {boolean} \n   */\n  async isCompleteEnabled(app) {\n\n    // Check ds initialization\n    const currentWO = app.findDatasource(\"woDetailResource\");\n    if (!currentWO || !currentWO.initialized) {\n      this.app.log.e(TAG,'woDetailResource not initialized');\n      return;\n    }\n\n    // Check ds initialization\n    const wlogDS = app.findDatasource(\"woDetailsWorklogDs\");\n    if (!wlogDS || !wlogDS.initialized) {\n      this.app.log.e(TAG,'woDetailsWorklogDs not initialized');\n      return;\n    }\n\n    const workItem = currentWO?.item;\n    if (!workItem) {\n      this.app.log.e(TAG,'something is wrong. No work item defined');\n      return;\n    }\n    this.app.log.d(TAG,JSON.stringify({wonum: workItem?.wonum, assetnum: workItem?.assetnum, workType: workItem?.worktype, href: workItem?.href}));\n    \n    // Load parent of reportworkLabords\n    const woDetailsReportWorkDS = app.findDatasource(\"woDetailsReportWork\");\n    await woDetailsReportWorkDS.load({\n      noCache: true,\n      itemUrl: workItem?.href,\n    });\n    // Check ds initialization\n    const ltransDS = app.findDatasource(\"reportworkLaborDetailds\");\n    if (!ltransDS || !ltransDS.initialized) {\n      this.app.log.e(TAG,'reportworkLaborDetailds not initialized');\n      return;\n    }\n    // Force load of labor transaction DS\n    await ltransDS.forceReload();\n\n    if (!wlogDS?.items || !ltransDS?.items) {\n      this.app.log.d(TAG,'missing worklogs or labor transactions');\n    }\n\n    this.app.log.d(TAG,\\`has workLog:\\${!!wlogDS.items.length} / has labor:\\${!!ltransDS.items.length}\\`);\n    // Build part of validation considering work logs and labor actual\n    let enableComplete = !!wlogDS.items.length && !!ltransDS.items.length;\n\n    //shouldCheckPCR when there is asset and work type is not in [PM]\n    this.app.log.d(TAG,\\`wonum \\${workItem?.wonum} / asset \\${workItem?.assetnum} / worktype \\${workItem?.worktype}\\`);\n\n    // shouldFullCheckPCR when there is asset and work type is not in [PM] \n    if (enableComplete && workItem.assetnum && !['PM'].includes(workItem.worktype)) {\n\n      const failureReport = woDetailsReportWorkDS.item?.failurereport || [];\n      this.app.log.d(TAG,JSON.stringify(failureReport));\n      enableComplete = this.hasPCR(failureReport);\n      \n    }\n    return enableComplete;\n  }\n`}</code></pre>\n    <h3>{`Step 6: Apply validation using the previous method to update the state created.`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`/**\n   * Enables/disables complete button from report work page based on complete validation\n   * @param {Page} page \n   * @param {App} app \n   */\n  async addCompleteButtonValidation(page, app) {\n    // Set disable before starting processing condition\n    page.state.disableCompleted=true;\n    // Get validation result\n    const enableComplete = await this.isCompleteEnabled(app);\n    this.app.log.d(TAG, \\`Setting complete button to \\${enableComplete}\\`);\n    // Set complete button according to validation\n    page.state.disableCompleted=!enableComplete;\n  }\n`}</code></pre>\n    <h3>{`Step 7: Bind buttonValidation method to pageResumed lifecycle hook when it is the correct page.`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`  pageResumed(page, app) {\n    // Run validation for complete button \n    if (app.currentPage.name === 'report_work' && page.name==='report_work') {\n      this.app.log.d(TAG,'entering add completebuttonvalidation logic');\n      this.addCompleteButtonValidation(page, app);\n    }\n  }\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["title","theme","tabs","className","cx","length","id","relativePagePath","repositoryProp","repository","useStaticQuery","site","siteMetadata","baseUrl","subDirectory","href","branch","PageTabs","render","this","props","slug","currentTab","split","filter","Boolean","slice","pageTabs","map","tab","slugifiedTab","slugify","lower","strict","selected","currentTabRegex","RegExp","replace","key","Link","to","React","date","lastModified","Date","toLocaleDateString","day","year","month","pageContext","children","location","Title","frontmatter","titleType","frontmatterTheme","description","keywords","interiorTheme","useMetadata","pathPrefix","pathname","Layout","homepage","pageTitle","pageDescription","pageKeywords","label","Main","padded","NextPrevious","Utils","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"sourceRoot":""}